# Media Video Maker

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ —Å MCP –∏ REST API.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd media-video-maker_server
npm install
```

### 2. –°–∫–∞—á–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ–∞–π–ª—ã
**–í–ê–ñ–ù–û:** –°–∫–∞—á–∞–π—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ–∞–π–ª—ã:
- `kokoro-v1.0.onnx` (310MB) - –º–æ–¥–µ–ª—å TTS Kokoro
- `voices-v1.0.bin` - –≤–µ—Å–∞ –¥–ª—è Kokoro TTS

–ü–æ–º–µ—Å—Ç–∏—Ç–µ –∏—Ö –≤ –ø–∞–ø–∫—É `media-video-maker_server/`

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm run build
npm start
```

## üì° API Endpoints

### REST API (–ø–æ—Ä—Ç 3000)
- `GET /api/ping` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- `POST /api/create-video` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ
- `GET /api/status/:id` - —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- `GET /api/jobs` - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `GET /api/capabilities` - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

### MCP Server (–ø–æ—Ä—Ç 3001)
- `POST /mcp/tools/media-video` - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ MCP
- `POST /mcp/subtitles/generate` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤
- `POST /mcp/tts/synthesize` - —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏
- `POST /mcp/assets/probe` - –∞–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

## üé¨ –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ

### –ü—Ä–∏–º–µ—Ä JSON –ø–ª–∞–Ω–∞:
```json
{
  "files": [
    {
      "id": "img1",
      "src": "path/to/image.jpg",
      "type": "image"
    }
  ],
  "width": 1080,
  "height": 1920,
  "fps": 30,
  "durationPerPhoto": 2.0,
  "music": "path/to/music.mp3",
  "tts": {
    "provider": "kokoro",
    "text": "–¢–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∫–∏"
  },
  "transcribeAudio": true,
  "burnSubtitles": true,
  "overlays": [
    {
      "type": "text",
      "text": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
      "position": "top-center",
      "start": 0,
      "end": 5
    }
  ],
  "effects": [
    {
      "kind": "zoom",
      "params": {
        "startScale": 1.0,
        "endScale": 1.2
      }
    }
  ]
}
```

## üõ† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
- ‚úÖ TTS –æ–∑–≤—É—á–∫–∞ (Kokoro, OpenAI)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—É–±—Ç–∏—Ç—Ä—ã (Whisper)
- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–≤–µ—Ä–ª–µ–∏
- ‚úÖ –í–∏–¥–µ–æ —ç—Ñ—Ñ–µ–∫—Ç—ã (zoom, VHS, retro)
- ‚úÖ –ê—É–¥–∏–æ –º–∏–∫—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ducking
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4K —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ FFmpeg —Ñ–∏–ª—å—Ç—Ä—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
media-video-maker_server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ audio/          # TTS –∏ –∞—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ pipeline/       # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ server/         # REST –∏ MCP —Å–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ subtitles/      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ transcribe/     # Whisper —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ assets/             # –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ out/               # –ì–æ—Ç–æ–≤—ã–µ –≤–∏–¥–µ–æ
‚îî‚îÄ‚îÄ dist/              # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- FFmpeg
- Python 3.8+ (–¥–ª—è Whisper)
- 4GB+ RAM
- 10GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "kokoro-v1.0.onnx not found"
–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ `media-video-maker_server/`

### –û—à–∏–±–∫–∞ FFmpeg
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `ffmpeg -version`

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ `src/index.ts` (REST: 3000, MCP: 3001)

## üìù –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `server.log` - –æ–±—â–∏–µ –ª–æ–≥–∏
- `api_server.log` - REST API
- `job_*/` - –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–∏–¥–µ–æ:
```bash
curl -X POST http://localhost:3000/api/create-video \
  -H "Content-Type: application/json" \
  -d @example_plan.json
```

### –ß–µ—Ä–µ–∑ MCP:
```bash
curl -X POST http://localhost:3001/mcp/tools/media-video \
  -H "Content-Type: application/json" \
  -d @mcp_plan.json
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. FFmpeg —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã
4. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
5. –ú–æ–¥–µ–ª–∏ TTS —Å–∫–∞—á–∞–Ω—ã

---
**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
