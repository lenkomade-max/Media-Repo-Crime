{
  "name": "üß™ –¢–µ—Å—Ç MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "jsCode": "// –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π JSON –¥–ª—è MCP\nconst testPayload = {\n  \"files\": [\n    {\n      \"id\": \"test_image\",\n      \"src\": \"/root/test_image.jpg\",\n      \"type\": \"photo\",\n      \"durationSec\": 5\n    }\n  ],\n  \"width\": 1080,\n  \"height\": 1920,\n  \"fps\": 30,\n  \"durationPerPhoto\": 5,\n  \"outputFormat\": \"mp4\",\n  \"musicVolumeDb\": -8,\n  \"overlays\": [],\n  \"tts\": {\n    \"provider\": \"kokoro\",\n    \"voice\": \"default\"\n  },\n  \"ttsText\": \"–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ N8N —Å MCP —Å–µ—Ä–≤–µ—Ä–æ–º.\",\n  \"subtitles\": [\n    {\n      \"start\": 0,\n      \"end\": 5,\n      \"text\": \"–¢–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ\"\n    }\n  ]\n};\n\nreturn {\n  json: {\n    mcp_payload: testPayload,\n    test_mode: true,\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "id": "create-test-payload",
      "name": "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ payload",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "url": "http://178.156.142.35:4123/api/create-video",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "contentType": "json",
        "jsonBody": "={{ JSON.stringify($json.mcp_payload) }}",
        "options": {}
      },
      "id": "test-mcp-call",
      "name": "üé¨ –¢–µ—Å—Ç MCP API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "jsCode": "// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç MCP\nconst response = $input.first().json;\n\nif (response.id) {\n  return {\n    json: {\n      status: 'success',\n      message: '‚úÖ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!',\n      job_id: response.id,\n      status_url: `http://178.156.142.35:4123/api/status/${response.id}`,\n      next_step: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥'\n    }\n  };\n} else {\n  return {\n    json: {\n      status: 'error',\n      message: '‚ùå –û—à–∏–±–∫–∞ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏',\n      error: response.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞',\n      response: response\n    }\n  };\n}"
      },
      "id": "process-response",
      "name": "üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ payload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ payload": {
      "main": [
        [
          {
            "node": "üé¨ –¢–µ—Å—Ç MCP API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üé¨ –¢–µ—Å—Ç MCP API": {
      "main": [
        [
          {
            "node": "üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": ["test", "mcp"],
  "triggerCount": 1,
  "updatedAt": "2025-10-02T10:40:00.000Z",
  "versionId": "1"
}


